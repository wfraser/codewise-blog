<!-- :cwb_start: sectionlist_entry -->
<tr><td><input type="submit" name="section_sel" value="${section}" /></td></tr>
<!-- :cwb_end: sectionlist_entry -->
<!-- :cwb_start: sectionlist_current -->
<tr><td><input type="submit" name="section_sel" value="${section}" disabled="disabled" /></td></tr>
<!-- :cwb_end: sectionlist_current -->

<!-- :cwb_start: varlist_entry -->
<tr>
<td>${varname}</td>
<td><blockquote>${vardesc}</td>
</tr>
<!-- :cwb_end: varlist_entry -->

<form action="${posturl}" method="post">
<style type="text/css">
table.skintable {
    border:none;
}

table.skintable td {
    padding: 10px;
}

table.skintable td td {
    padding: 0px;
}
</style>
<table class="skintable">
<tr>
<td style="vertical-align:top">
    <table>
    ${sectionlist}
    </table>
    <br />
    <table>
    ${varlist}
    </table>
</td>
<td style="vertical-align:top">
    ${content}
</td>
</tr>
</table>
</form>

<!-- :cwb_start: section_edit -->
<script type="text/javascript">
function getScrollX()
{
    if(typeof(window.pageXOffset) == 'number')
    {
        return window.pageXOffset;
    } else if(document.body && document.body.scrollLeft) {
        return document.body.scrollLeft;
    } else if(document.documentElement && document.documentElement.scrollLeft) {
        return document.documentElement.scrollLeft;
    }
}

function getScrollY()
{
    if(typeof(window.pageYOffset) == 'number')
    {
        return window.pageYOffset;
    } else if(document.body && document.body.scrollTop) {
        return document.body.scrollTop;
    } else if(document.documentElement && document.documentElement.scrollTop) {
        return document.documentElement.scrollTop;
    }
}

function autoResize(internal)
{
    if(navigator.appName == "Konqueror")
    {
        alert("this feature does not work under Konqueror");
        return;
    }

    /*
    ** Step 1: resize to 0,0
    ** Step 2: read scrollbar info (use this as the limit)
    ** Step 3: (for x and y) expand until scrollbar info is greater than limit
    ** Step 4: step back one x and y.
    ** Step 5: done!
    */

    var canvas = document.getElementById("canvas");
    var cols = document.getElementById("cols");
    var rows = document.getElementById("rows");

    canvas.cols = 0;
    canvas.rows = 0;

    window.scrollTo(1e6, 1e6); // that should be high enough ;)

    var sxmax = getScrollX();
    var symax = getScrollY();

    var xdone = false;

    while(true) {

        window.scrollTo(1e6,1e6);

        var sx = getScrollX();
        var sy = getScrollY();

        if(sx <= sxmax)
        {
            canvas.cols++;
        }

        if(sy <= symax)
        {
            canvas.rows++;
        }

        if(sx > sxmax && sy > symax)
        {
            canvas.cols--;
            canvas.rows--;

            cols.value = canvas.cols;
            rows.value = canvas.rows;

            return;
        }
    }

}
</script>
<input type="hidden" name="section" value="${section_name}" />
<!-- #cwb_if# ${using_master} -->
<b>Using master skin</b>
</b>
<!-- #cwb_else# -->
<input type="submit" name="revert" value="Revert to Master" />
<!-- #cwb_endif# -->
<br /><br />
<textarea name="section_content" rows="${rows}" cols="${cols}" id="canvas" style="font-family:monospace">${section_content}</textarea>
<br /><br />
<table style="border:none" width="100%">
    <tr>
        <td>
            <input type="submit" name="go_baby_go" value="Submit Changes" />
        </td>
        <td align="right">
            <input type="submit" name="resize" value="resize text area" />
            <input type="text" size="3" name="cols" id="cols" value="${cols}" />
            x
            <input type="text" size="3" name="rows" id="rows" value="${rows}" />
            <input type="button" value="auto resize" onclick="autoResize()" />
        </td>
    </tr>
</table>
<!-- :cwb_end: section_edit -->
